<!-- 
	Copyright (c) 2018, Master Kang. All rights reserved.
 -->
 
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>康祥祥-元旦作业</title>
</head>
<label for="citys">请选择省份: </label>
<select name="province" id="province"></select>
<select name="city" id="city"></select>
<button id="clickMe">点我</button>
<button id="randomBgColor">点我随机更换背景色</button><br>
<input type="text" name="email" id="email">
<button id="chkEmail">点我验证邮箱</button><br>
<input type="text" name="showtime" id="showtime" disabled>
<button id="clickShowTime">点我显示当前时间</button>
<div class="txt">我是div</div>
<script>
/*
	一、 给定一个字符串例如:
	“abaasdffggghhjjkkgfddsssss3444343”;问题如下: 
	1、 字符串的字节长度 
	2、 取出指定位置的字符，如:0,3,5,9等 
	3、 查找指定字符是否在以上字符串中存在，如:i，c ，b等 
	4、 替换指定的字符，如:g替换为22,ss替换为b等操作方法 
	5、 截取指定开始位置到结束位置的字符串，如:取得1-5的字符串 
	6、 找出以上字符串中出现次数最多的字符和出现的次数 
	7、遍历字符串，并将遍历出的字符两头添加符号“@”输出至当前的文档页面 
	*/

// let str = 'abaasdffggghhjjkkgfddsssss3444343';
// console.log(str);
// 1、 字符串的字节长度 
// console.log(str.length);

// 2、 取出指定位置的字符，如:0,3,5,9等 
// console.log('0: ' + str.charAt(0));
// console.log('3: ' + str.charAt(3));
// console.log('5: ' + str.charAt(5));
// console.log('9: ' + str.charAt(9));

// 3、 查找指定字符是否在以上字符串中存在，如:i，c ，b等 
// const flag = str.indexOf('sd');
// const flag = str.includes('hj');
// console.log(flag);

// 4、 替换指定的字符，如:g替换为22,ss替换为b等操作方法 
// let replaced_str = str.replace(/g/g, 22);
// console.log(replaced_str);

// 5、 截取指定开始位置到结束位置的字符串，如:取得1-5的字符串
// let subStr = str.substring(1,5);
// console.log(subStr);

// 6、 找出以上字符串中出现次数最多的字符和出现的次数
// const str = 'h$$$$$$$ello111123';
// const obj = {};
// [...new Set(str.split(''))].forEach(chr => obj[chr] = 0);
// for (const k in obj) {
//     [...str].forEach(c => {
//         if (k === c) ++obj[k];
//     });
// }
// const max = Math.max(...Object.values(obj));
// for (const k in obj) {
//     if (obj[k] === max) {
//         console.log(`'${k}': ${max}`);
//         return;
//     }
// }

// 7、遍历字符串，并将遍历出的字符两头添加符号“@”输出至当前的文档页面
// let anies = [...str].map(chr => {
//     console.log(chr);
//     return `@${chr}@`;
// });
// document.write(anies.join(''));





/*
	二、 根据当前日期进行以下方面的处理: 
	1、 取得日期的年份、月份、天、时、分、秒，并转换成大写日期格式 
		如:2013年8月17日0时30分20秒 
	2、 根据日期的不同时间段，做问候语: 
		早上8:00-12:00 :“早上好～欢迎登陆系统” 
		中午12:00-14:00:“中午好～该休息了” 
		下午14:00-18:00:“下午好～欢迎登陆系统” 
		晚上19:00-00:00:“晚上好～XXXXXXXXX” 
		注:你若觉得分的不够细，可以将时间段划分的更细一些。
	3、 计算当前时间向前、向后的日期，并取出是星期几。 （扩展）
 */

// Date.prototype.in = function({ start = 0, end = 0, hours = this.getHours() } = {}) {
// 	if (!Date.in) {
// 		console.log(`start: ${start}\nend: ${end}`);
// 		console.log('hours: ' + hours);
// 		if (start === 0 && end === 0) {
// 			throw new TypeError('please specify [start, end) hours');
// 		}
// 		if ((hours >= start) && (hours < end)) {
// 			return true;
// 		}
// 	}
// 	return false;
// };
//  const MSDate = {
// 	date: new Date(),
// 	year: new Date().getFullYear(),
// 	month: new Date().getMonth() + 1,
// 	day: new Date().getDate(),
// 	hour: new Date().getHours(),
// 	minute: new Date().getMinutes(),
// 	second: new Date().getSeconds(),
// 	get weekday() {
// 		return [7, 1, 2, 3, 4, 5, 6][new Date().getDay()];
// 	},
// };

// 1、 取得日期的年份、月份、天、时、分、秒，并转换成大写日期格式 
// console.log(`${year}-${month}-${day} ${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`);


/*
	2、 根据日期的不同时间段，做问候语: 
	早上8:00-12:00 :“早上好～欢迎登陆系统” 
	中午12:00-14:00:“中午好～该休息了” 
	下午14:00-18:00:“下午好～欢迎登陆系统” 
	晚上19:00-00:00:“晚上好～XXXXXXXXX” 
*/
// if (date.in({start:8, end: 12})) {
// 	alert('早上好～欢迎ATLAS登陆系统');
// } else if (date.in({start: 12, end: 14})) {
// 	alert('中午好～该休息了');
// } else if (date.in({start: 14, end: 18})) {
// 	alert('下午好～欢迎ATLAS登陆系统');
// } else if (date.in({start: 18, end: 24})) {
// 	alert('晚上好～蠢狗滚去睡觉吧');
// }


/*
	3、 计算当前时间向前、向后的日期，并取出是星期几。 （扩展）
 */
// const Year = {
// 	isLeap(y) {
// 		if((y % 4 === 0 && y % 100 !== 0) || y % 400 === 0){
// 			return true;
// 		}
// 		return false;
// 	},
// 	isCommon(y) {
// 		return !this.isLeap(y);
// 	},
// 	get days() {
// 		if (this.isLeap()) {
// 			return [,31,29,31,30,31,30,31,31,30,31,30,31];
// 		}
// 		return [,31,28,31,30,31,30,31,31,30,31,30,31];
// 	},
// };

// // get current date


// const calcDateBefore = function calcDate(day = 0) {

// 	const lastMonthDays = Year.days[MSDate.month-1];
// 	let resultDay = MSDate.day - day;
// 	let weekday = MSDate.weekday - day % 7;
// 	console.log('isLeap? ',Year.isLeap());
// 	console.log('last month days: ', lastMonthDays);
// 	console.log('specify day: ', day);
// 	console.log('current day: ', MSDate.day);
// 	console.log('current weekday: ' + MSDate.weekday);
// 	if (resultDay < 0) {
// 		resultDay += lastMonthDays;
// 	}
// 	console.log('result day: ', resultDay);
// 	if (weekday < 0) {
// 		weekday += 7;
// 	}
// 	console.log('result weekday: ', weekday);
// };

// calcDateBefore(58);





/*
	函数调用，建立两个函数，
	一个函数是中学二次函数表达式的计算方法，
	另一个函数是给定任意的20个x值，
	调用前一个函数计算y对应的值，并使用方式输出20个计算结果。 
	（就是写两个函数，一个函数调用另一个函数）
 */

// const msQqrt = function(base, index) {
// 	if (base === 1 || index === 0) return 1;
// 	const flag = (index > 0);
// 	index = (index > 0 ? index : -index);

//     let total = 1;
//     while (index-- > 0) {
//         total *= base;
//     }
//     return (flag ? total : (1 / total));
// }

// console.log(msQqrt(-2, -2));






/*
	4、 使用二重循环打印9×9乘法表
 */

// const table = [];
// for (let row = 1; row <= 9; row++) {
// 	for (let col = 1; col <= row; col++) {
// 		// table += `${row}x${col}=${String(row * col).padStart(2, ' ')}  `;
// 		table.push(`${row}x${col}=${String(row * col).padStart(2, ' ')}  `);
// 	}
// 	table.push('\n');
// }

// console.log(table.join(''));





/*
使用JavaScript中变量定义省份及对应的城市，
应用Select标签对象，实现二级级联的下拉菜单选中效果。
也就是说，在省份下拉菜单中，选中一个省份时，在城市下拉菜单中出现对应城市选择内容
 */
// const datas = {
//     '江苏': ['南京', '苏州', '昆山', '淮安', '泰州'],
//     '北京': ['东城', '西城', '朝阳', '通州', '石景山'],
//     '安徽': ['合肥', '芜湖', '蚌埠', '安庆', '黄山'],
// };

// const province = $selector('#province');
// const city = $selector('#city');

// // init provinces
// const provinces = Object.keys(datas);
// for (let opts = 0; opts < provinces.length; opts++) {
//     const option = create('option');
//     option.value = provinces[opts];
//     option.innerText = provinces[opts];
//     province.appendChild(option);
// }

// // init cities
// datas[Object.keys(datas)[0]].forEach(c => {
//     const option = create('option');
//     option.value = c;
//     option.innerText = c;
//     city.appendChild(option);
// });

// // the event of select province
// province.addEventListener('change', (e) => {
//     // empty cities select datas
//     if (city.children.length > 0) {
//         [...city.children].forEach(c => city.removeChild(c));
//     }
//     // when we selected province, 
//     // trigger the 2nd select change cities datas.
//     [...e.target.children].forEach(opt => {
//         if (opt.selected) {
//             datas[opt.innerText].forEach(c => {
//                 const option = create('option');
//                 option.value = c;
//                 option.innerText = c;
//                 city.appendChild(option);
//             });
//         }
//     });
// });






// 1、 在打开页面时弹出一个确认对话框显示:“你确定继续浏览吗,”。
// 如果用户点击确定, 则用alert显示信息“欢迎光临～”;
// 若用户点击取消，则用alert显示信息“欢迎再来～”并使用window.close 关闭页面
// document.body.style.display = 'position: relative';
// const flag = confirm('你确定继续浏览吗?');
// if (flag) {
//     alert('欢迎光临～');
// } else {
//     alert('欢迎再来～');
//     window.close();
// }




// 2、 使用循环语句和document.write，依次以h1~h6的6级标题格式在页面中输出6行“欢迎 光临”
// const body = document.body;

// for (let i = 1; i <= 6; i++) {
//     const hx = document.createElement(`h${i}`)
//     hx.innerText = '欢迎光临';
//     body.appendChild(hx);
// }



// 在页面中禁止右键的使用，并在用户点击鼠标右键时使用alert弹出提示
// document.addEventListener('mousedown', (e) => {
//     if (e.button === 2) {
//         alert('鼠标右键已被禁止使用');
//     }
// });

// 在页面中使用onselectstart禁止选择操作，
// 并在用户进行选择时使用alert弹出提示信息:“禁止选取～”
// document.addEventListener('selectstart', (e) => {
// 	e.preventDefault();
//     alert('禁止选取～');
// });

// 在页面中使用oncopy禁止复制操作，
// 并在用户进行复制时使用alert弹出提示信息:“禁止选取～”
// document.addEventListener('copy', (e) => {
// 	e.preventDefault();
// 	alert('禁止复制～');
// });




// 使用onkeypress事件，在页面按下字符按键时，获取用户按下的按键编号，
// 并在状态栏用以下格式显示: 
// “您刚才所按下的按键为:„”。

// document.addEventListener('keypress', (e) => {
//     console.log(`${e.key} : ${e.keyCode}`);
// });



// 在页面中showtime的div中显示当前时间。格式如下: 
// ::。每隔一秒刷新一次。 
// 提示:使用innerText/innerHTML。 

// const showtime = $selector('.showtime');
// showtime.innerText = getNowTime();

// setInterval(() => {
//     showtime.innerText = getNowTime();
// }, 1000)



/*
	对页面中txt的div按以下要求设置鼠标事件:鼠标在上时，背景颜色修改为#CC66CC，  
	1、页面上有一个按钮，点击能弹出一个对话框询问“请问你是女孩吗,”;如果选择确定，则显示“太好了～”，否则显示“没劲” 
	2、页面上有一个按钮，点击后能让网页的背景不停变色 
	3、页面上有一个按钮及文本框，在文本框中输入邮箱后，点击按钮能进行验证，要求不能为空，且必须包含@和. 
	4、页面上有一个按钮，点击后能在文本框内显示出当前系统时间，如下图所示 
 	*/

// 页面上有一个按钮，点击后能在文本框内显示出当前系统时间
// const clickShowTime = $selector('#clickShowTime');
// clickShowTime.onclick = function() {
//     $selector('#showtime').value = getNowTime();
//     setInterval(() => $selector('#showtime').value = getNowTime(), 1000);
// };


// // 页面上有一个按钮及文本框，在文本框中输入邮箱后，
// // 点击按钮能进行验证，要求不能为空，且必须包含@和. 
// const chkEmail = document.querySelector('#chkEmail');
// chkEmail.addEventListener('click', function() {
//     const email = document.querySelector('#email');
//     if (email.value.length === 0) {
//         alert('请输入邮箱');
//         return;
//     }
//     if (!(/[@]/.test(email.value) && /[\.]/.test(email.value))) {
//         alert('请输入正确的邮箱: 必须包含@和.');
//         return;
//     }
//     alert('邮箱验证通过');
// });


// const txt = document.querySelector('.txt');
// txt.addEventListener('mouseenter', function(e) {
//     // 鼠标在上时，背景颜色修改为#CC66CC
//     this.style.background = '#CC66CC';
// });
// txt.addEventListener('mouseleave', function(e) {
//     // 鼠标在上时，背景颜色修改为#CC66CC
//     this.style.background = '';
// });

// const clickMe = document.querySelector('#clickMe');
// clickMe.addEventListener('click', function() {
//     const flag = confirm('请问你是女孩吗?');
//     if (flag) {
//         alert('太好了～');
//     } else {
//         alert('没劲 !');
//     }
// });


// // 页面上有一个按钮，点击后能让网页的背景不停变色 
// const bodyBgColor = document.querySelector('#randomBgColor');
// bodyBgColor.addEventListener('click', function() {
//     document.body.style.background = randomColor();
// });


// function randomColor() {
//     const r = getRandom(0, 255);
//     const g = getRandom(0, 255);
//     const b = getRandom(0, 255);
//     return `rgba(${r}, ${g}, ${b}, 1)`;
// }
</script>
</body>

</html>